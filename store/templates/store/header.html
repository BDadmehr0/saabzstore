<header class="sticky top-0 z-50">
    <div class="hero-gradient text-white">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">

            <!-- لوگو -->
            <h1 class="text-2xl font-bold">سبز استور</h1>

            <!-- ناوبری دسکتاپ -->
            <nav class="hidden md:flex items-center space-x-6 space-x-reverse text-sm">
                <a href="{% url 'index' %}" class="hover:text-emerald-200 font-medium">خانه</a>
                <a href="{% url 'store' %}" class="hover:text-emerald-200 font-medium">محصولات</a>
                <a href="#" class="hover:text-emerald-200 font-medium">دسته‌بندی‌ها</a>
                <a href="#" class="hover:text-emerald-200 font-medium">درباره ما</a>
                <a href="#" class="hover:text-emerald-200 font-medium">تماس با ما</a>
            </nav>

            <!-- بخش راست -->
            <div class="flex items-center space-x-4 space-x-reverse">

                <!-- سرچ‌بار دسکتاپ -->
                <form method="GET" action="{% url 'store' %}" class="hidden md:block w-full max-w-md">
                    <div class="relative">
                        <input
                            type="text"
                            name="q"
                            value="{{ request.GET.q }}"
                            placeholder="جستجوی محصول..."
                            class="w-full bg-white text-gray-700 placeholder:text-gray-400 text-sm rounded-full
                                   pr-12 pl-4 py-2 border border-gray-200 shadow-sm
                                   focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"
                        />
                        <button type="submit"
                                class="absolute inset-y-0 right-0 flex items-center justify-center
                                       bg-emerald-600 hover:bg-emerald-700 text-white
                                       w-10 rounded-full">
                            <i class="fas fa-search text-sm"></i>
                        </button>
                    </div>
                </form>

                <!-- آیکون ها -->
                <button class="p-2 rounded-full hover:bg-white/10">
                    <i class="fas fa-shopping-cart"></i>
                </button>

                <button class="p-2 rounded-full hover:bg-white/10">
                    <i class="fas fa-user"></i>
                </button>

                <!-- دکمه سرچ موبایل (جای برگر) -->
                <button onclick="openSearchModal()" class="md:hidden p-2 rounded-full hover:bg-white/10">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </div>
</header>

<!-- مودال سرچ موبایل -->
<div id="searchModal"
     class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden justify-center items-center z-50">

    <div class="bg-white w-11/12 max-w-sm rounded-2xl p-5 shadow-xl animate-fadeIn">

        <h2 class="text-right text-gray-800 font-semibold mb-3">جستجوی محصول</h2>

        <form method="GET" action="{% url 'store' %}">
            <div class="relative">
                <input
                    type="text"
                    name="q"
                    placeholder="نام محصول را وارد کنید..."
                    class="w-full bg-gray-100 border border-gray-300 rounded-xl py-3 px-4 text-gray-700
                           focus:ring-2 focus:ring-emerald-500 focus:outline-none">
            </div>

            <button type="submit"
                    class="mt-4 w-full py-3 rounded-xl bg-emerald-600 text-white font-semibold
                           hover:bg-emerald-700 transition">
                جستجو
            </button>
        </form>

        <button onclick="closeSearchModal()"
                class="mt-3 w-full py-2 text-center text-sm text-gray-500 hover:text-gray-700">
            بستن
        </button>
    </div>
</div>

<!-- انیمیشن مودال -->
<style>
    .animate-fadeIn {
        animation: fadeIn .25s ease;
    }
    @keyframes fadeIn {
        from { transform: scale(.9); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
    }
</style>

<!-- اسکریپت مودال -->
<script>
    function openSearchModal() {
        document.getElementById("searchModal").classList.remove("hidden");
        document.getElementById("searchModal").classList.add("flex");
    }

    function closeSearchModal() {
        document.getElementById("searchModal").classList.add("hidden");
        document.getElementById("searchModal").classList.remove("flex");
    }
</script>