{% extends 'store/base.html' %}
{% block title %}صفحه اصلی - پاپل بار{% endblock %}
{% load price_filters %}
{% load static %}

{% block content %}

<!-- ========================== اسلایدر اصلی ========================== -->
<section class="relative overflow-hidden">
    <div class="slider-gradient text-white py-12 md:py-24">

        <div class="container mx-auto px-4 relative z-10">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">

                <!-- متن سمت راست -->
                <div>
                    <h2 class="text-3xl md:text-5xl font-bold mb-4 leading-tight">
                        تجربه‌ای متفاوت از 
                        <span class="text-emerald-200">لوازم تحریر</span>
                    </h2>

                    <p class="text-lg md:text-xl mb-8 opacity-90">
                        با محصولات منحصربه‌فرد و باکیفیت ما، خلاقیت خود را به نمایش بگذارید
                    </p>

                    <div class="flex space-x-3 space-x-reverse">
                        <a href="{% url 'store' %}" class="bg-[#fdfef9] text-emerald-700 px-5 py-3 rounded-lg font-bold hover:bg-gray-100 hover-lift">
                            مشاهده محصولات
                            <i class="fas fa-arrow-left mr-2"></i>
                        </a>
                        <a href="#" class="glass-effect text-white px-5 py-3 rounded-lg font-bold hover:bg-white/20 hover-lift">
                            درباره ما
                        </a>
                    </div>
                </div>

                <!-- بخش گرافیکی چپ -->
                <div class="relative w-full h-64 md:h-[480px] overflow-hidden rounded-[2rem]">

                    <!-- شبکه سه‌بعدی (در موبایل سبک‌تر شده) -->
                    <div class="absolute inset-0 opacity-20 [mask-image:linear-gradient(to_bottom,white,transparent)] hidden sm:block">
                        <div class="absolute inset-0 animate-grid"></div>
                    </div>

                    <!-- خطوط نئونی (در موبایل حذف شد برای جلوگیری از لرزش) -->
                    <div class="absolute inset-0 pointer-events-none hidden sm:block">
                        <div class="absolute w-[200%] h-[3px] bg-gradient-to-r from-transparent via-emerald-400 to-transparent top-1/3 animate-neon-line"></div>
                        <div class="absolute w-[200%] h-[3px] bg-gradient-to-r from-transparent via-emerald-300 to-transparent top-1/2 animate-neon-line-slow"></div>
                        <div class="absolute w-[200%] h-[3px] bg-gradient-to-r from-transparent via-emerald-200 to-transparent top-2/3 animate-neon-line-fast"></div>
                    </div>

                    <!-- اشکال شناور (نسخه سبک موبایل) -->
                    <div class="absolute inset-0">
                        <div class="absolute w-20 h-20 md:w-32 md:h-32 border border-emerald-300/40 rotate-12 animate-float-1 left-6 top-8 backdrop-blur-xl"></div>
                        <div class="absolute w-16 h-16 md:w-24 md:h-24 border border-emerald-200/40 rotate-45 animate-float-2 right-10 top-16 bg-emerald-200/10"></div>
                        <div class="absolute w-14 h-14 md:w-20 md:h-20 border border-emerald-300/30 animate-float-3 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 backdrop-blur-lg rotate-6"></div>
                    </div>

                    <!-- گوی نورانی پالس دار (در موبایل blur سبک‌تر شده) -->
                    <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2">
                        <div class="w-24 h-24 md:w-32 md:h-32 rounded-full bg-emerald-400/40 blur-xl md:blur-3xl animate-pulse-fast"></div>
                    </div>

                </div>
            </div>
        </div>

        <!-- نورهای پس‌زمینه بسیار سبک برای موبایل -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none hidden md:block">
            <div class="absolute -top-24 -right-24 w-72 h-72 rounded-full bg-white/5"></div>
            <div class="absolute -bottom-32 -left-32 w-96 h-96 rounded-full bg-white/5"></div>
        </div>

    </div>
</section>

<!-- ========================== دسته‌بندی‌ها ========================== -->
<section class="py-12 bg-[#fdfef9]">
    <div class="container mx-auto px-4">
        <div class="text-center mb-10">
            <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-3">دسته‌بندی‌های محصولات</h2>
            <p class="text-gray-600 max-w-xl mx-auto text-sm md:text-base">
                محصولات ما در دسته‌بندی‌های متنوعی قرار گرفته‌اند تا پیدا کردن آنچه نیاز دارید آسان‌تر شود
            </p>
        </div>

        <!-- موبایل: 2 ستون — دسکتاپ: 4 ستون -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">

            <a href="#" class="category-gradient text-white rounded-xl p-5 text-center hover-lift">
                <div class="bg-white/20 w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fas fa-pencil-alt text-xl md:text-2xl"></i>
                </div>
                <h3 class="font-bold text-base md:text-lg mb-1">مداد و خودکار</h3>
                <p class="text-xs md:text-sm opacity-90">انواع مداد، خودکار و روان‌نویس</p>
            </a>

            <a href="#" class="bg-emerald-50 border border-emerald-100 rounded-xl p-5 text-center hover-lift">
                <div class="bg-emerald-100 text-emerald-700 w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fas fa-book text-xl md:text-2xl"></i>
                </div>
                <h3 class="font-bold text-base md:text-lg mb-1 text-gray-800">دفتر و کاغذ</h3>
                <p class="text-xs md:text-sm text-gray-600">دفتر، کاغذ A4، پاکت و...</p>
            </a>

            <a href="#" class="bg-emerald-50 border border-emerald-100 rounded-xl p-5 text-center hover-lift">
                <div class="bg-emerald-100 text-emerald-700 w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fas fa-palette text-xl md:text-2xl"></i>
                </div>
                <h3 class="font-bold text-base md:text-lg mb-1 text-gray-800">رنگ و نقاشی</h3>
                <p class="text-xs md:text-sm text-gray-600">مداد رنگی، آبرنگ، گواش و...</p>
            </a>

            <a href="#" class="category-gradient text-white rounded-xl p-5 text-center hover-lift">
                <div class="bg-white/20 w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fas fa-cut text-xl md:text-2xl"></i>
                </div>
                <h3 class="font-bold text-base md:text-lg mb-1">قیچی و برش</h3>
                <p class="text-xs md:text-sm opacity-90">قیچی، کاتر، خط‌کش و...</p>
            </a>

        </div>
    </div>
</section>

<!-- ========================== محصولات ویژه ========================== -->
<section class="py-16 bg-gradient-to-b from-white to-emerald-50">
    <div class="container mx-auto px-4">

        <div class="text-center mb-12">
            <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">محصولات ویژه</h2>
            <p class="text-gray-600 max-w-xl mx-auto text-sm md:text-base">
                پرفروش‌ترین و محبوب‌ترین محصولات فروشگاه
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
            {% for p in special_products %}
                <a href="{% url 'product_detail' p.id p.slug %}" 
                   class="bg-white rounded-2xl overflow-hidden hover-lift flex flex-col h-full shadow-sm">

                    <div class="p-5 flex-1 flex flex-col">
                        <div class="relative mb-4">
                            {% if p.image %}
                                <img src="{{ p.image.url }}" alt="{{ p.name }}" class="w-full h-40 md:h-48 object-cover rounded-xl">
                            {% else %}
                                <img src="{% static 'images/default.png' %}" alt="no image" class="w-full h-40 md:h-48 object-cover rounded-xl">
                            {% endif %}
                            <span class="absolute top-3 left-3 bg-emerald-500 text-white text-xs font-bold px-3 py-1 rounded-full">ویژه</span>
                        </div>

                        <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-2">
                            {{ p.name }}
                        </h3>

                        <p class="text-gray-600 text-sm md:text-base flex-1">
                            {{ p.description|truncatechars:70 }}
                        </p>
                    </div>

                    <div class="p-5 flex justify-between items-center">
                        <span class="text-base md:text-lg font-bold text-emerald-600">
                            {{ p.price|toman }} تومان
                        </span>

                        <button class="bg-emerald-600 text-white px-3 py-2 md:px-4 md:py-2 rounded-lg hover:bg-emerald-700 text-sm md:text-base">
                            <i class="fas fa-cart-plus ml-1"></i> افزودن
                        </button>
                    </div>

                </a>
            {% empty %}
                <p class="text-gray-600 col-span-3 text-center">هیچ محصول ویژه‌ای ثبت نشده است.</p>
            {% endfor %}
        </div>

    </div>
</section>

<!-- ========================== مزایا ========================== -->
<section class="py-16 bg-[#fdfef9]">
    <div class="container mx-auto px-4">

        <div class="grid grid-cols-1 md:grid-cols-3 gap-10 text-center">

            <div>
                <div class="bg-emerald-100 text-emerald-600 w-14 h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-shipping-fast text-xl md:text-2xl"></i>
                </div>
                <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-2">ارسال رایگان</h3>
                <p class="text-gray-600 text-sm md:text-base">برای خریدهای بالای ۲۰۰ هزار تومان</p>
            </div>

            <div>
                <div class="bg-emerald-100 text-emerald-600 w-14 h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-undo text-xl md:text-2xl"></i>
                </div>
                <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-2">بازگشت ۷ روزه</h3>
                <p class="text-gray-600 text-sm md:text-base">در صورت عدم رضایت از محصول</p>
            </div>

            <div>
                <div class="bg-emerald-100 text-emerald-600 w-14 h-14 md:w-16 md:h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-headset text-xl md:text-2xl"></i>
                </div>
                <h3 class="text-lg md:text-xl font-bold text-gray-800 mb-2">پشتیبانی ۲۴/۷</h3>
                <p class="text-gray-600 text-sm md:text-base">پشتیبانی آنلاین همیشه آماده پاسخگویی</p>
            </div>

        </div>

    </div>
</section>

{% endblock %}
